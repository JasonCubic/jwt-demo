---
services:
  jwt-demo-api:
    build:
      dockerfile: ./packages/jwt-demo-api/Dockerfile.dev
    volumes:
      # Anonymous volumes to prevent connection to windows node_modules folder (aka: bookmark volumes)
      - /usr/app/node_modules
      - /usr/app/packages/jwt-demo-api/node_modules
      # host volume
      - ../packages/jwt-demo-api:/usr/app/packages/jwt-demo-api
      # dependency volumes
      - ../packages/jwt-demo-logs:/usr/app/packages/jwt-demo-logs

  jwt-demo-auth:
    build:
      dockerfile: ./packages/jwt-demo-auth/Dockerfile.dev
    volumes:
      # Anonymous volumes to prevent connection to windows node_modules folder (aka: bookmark volumes)
      - /usr/app/node_modules
      - /usr/app/packages/jwt-demo-auth/node_modules
      # host volume
      - ../packages/jwt-demo-auth:/usr/app/packages/jwt-demo-auth
      # dependency volumes
      - ../packages/jwt-demo-logs:/usr/app/packages/jwt-demo-logs

  jwt-demo-frontend:
    build:
      dockerfile: ./packages/jwt-demo-frontend/Dockerfile.dev
    volumes:
      # Anonymous volumes to prevent connection to windows node_modules folder (aka: bookmark volumes)
      - /usr/app/node_modules
      - /usr/app/packages/jwt-demo-frontend/node_modules
      # host volume
      - ../packages/jwt-demo-frontend:/usr/app/packages/jwt-demo-frontend

  # https://github.com/joeferner/redis-commander
  jwt-demo-redis-commander:
    image: rediscommander/redis-commander:latest
    container_name: jwt-demo-redis-commander
    environment:
      - REDIS_HOSTS=local:jwt-demo-redis:6379
    ports:
      - 9094:8081
    networks:
      - intranet
